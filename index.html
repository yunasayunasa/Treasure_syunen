<!DOCTYPE html>
<html>
<head>
    <!-- Phaser 3.60.0 をCDNから直接読み込みます -->
    <script src="https://cdn.jsdelivr.net/npm/phaser@3.60.0/dist/phaser.min.js"></script>
    <title>Minimal Mesh Test</title>
    <style>
        body { margin: 0; background-color: #1d1d1d; overflow: hidden; }
    </style>
</head>
<body>

<script>
class ExampleScene extends Phaser.Scene
{
    preload ()
    {
        // 外部の安定したサーバーから、テスト用の画像を1枚読み込みます
        this.load.image('character', 'https://labs.phaser.io/assets/pics/character-face.png');
    }

    create ()
    {
        const x = window.innerWidth / 2;
        const y = window.innerHeight / 2;

        // 1. 画像のサイズを取得します
        const texture = this.textures.get('character');
        const frame = texture.get();
        const width = frame.width;
        const height = frame.height;

        // 2. Meshオブジェクトを生成します
        // 今回は this.make.mesh という、より基本的なオブジェクト生成機能を使います
        const mesh = this.make.mesh({
            x: x,
            y: y,
            texture: 'character',
            vertices: [
                -width / 2, -height / 2,
                 width / 2, -height / 2,
                -width / 2,  height / 2,
                 width / 2,  height / 2
            ],
            uvs: [
                0, 0,
                1, 0,
                0, 1,
                1, 1
            ],
            faces: [ 0, 2, 3, 0, 3, 1 ],
            // 色とアルファを明示的に指定します
            colors: [ 0xffffff, 0xffffff, 0xffffff, 0xffffff ],
            alphas: [ 1, 1, 1, 1 ]
        });

        // 3. 生成したオブジェクトをシーンに追加して、表示させます
        this.add.existing(mesh);
        
        // 画面に説明テキストを表示します
        this.add.text(10, 10, 'Meshが表示されれば成功です', { color: '#ffffff' });
    }
}

const config = {
    type: Phaser.AUTO,
    width: window.innerWidth,
    height: window.innerHeight,
    scene: ExampleScene
};

const game = new Phaser.Game(config);
</script>

</body>
</html>
